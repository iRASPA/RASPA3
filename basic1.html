<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RASPA3: Monte Carlo of Methane in a box</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RASPA3<span id="projectnumber">&#160;3.0.8</span>
   </div>
   <div id="projectbrief">A molecular simulation code for computing adsorption and diffusion in nanoporous materials</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('basic1.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Monte Carlo of Methane in a box</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Here we run a basic Lennard-Jones simulation, using a United-Atom representation of methane.</p>
<p>You can find the directory with the all input files at <code>examples/basic/1_mc_methane_in_box</code>.</p>
<p>As this is likely your first simulation, let me explain what is happening after the input file is read.</p>
<p>First, your <code>simulation.json</code> file is read by the <a class="el" href="structInputReader.html" title="Class responsible for reading and parsing simulation input files.">InputReader</a>. It parses the input in three sections. First of all, general simulation settings like <code>SimulationType</code> and <code>NumberOfCycles</code> is read and set to the right attributes. Also, it will read the <code>force_field.json</code>.</p>
<p>Then, from the <b>list</b> of systems a <a class="el" href="structSystem.html" title="Represents the central system for simulations.">System</a> object is created for every entry. The <a class="el" href="structSystem.html" title="Represents the central system for simulations.">System</a> object is central to all simulations and holds the lists of <a class="el" href="structAtom.html" title="Represents an atom in the simulation system.">Atom</a>, <a class="el" href="structMolecule.html">Molecule</a>, <a class="el" href="structThermostat.html" title="Represents a Nose-Hoover thermostat for molecular dynamics simulations.">Thermostat</a>, <a class="el" href="structSimulationBox.html" title="Represents a simulation box used in simulations.">SimulationBox</a>, MCMoveProbabilitiesParticles, and also a variety of other trackers and property objects. While in this run we don't include a framework, this is also the place where a <a class="el" href="structFramework.html" title="Represents a framework in the simulation system.">Framework</a> object can be created.</p>
<p>Next, it will create a <a class="el" href="structComponent.html" title="Represents a component within the simulation system.">Component</a> object. This object holds information about the specific molecule, which holds thermodynamic and structural information.</p>
<p>Next, it will create a <a class="el" href="structMonteCarlo.html" title="Performs Monte Carlo simulations for molecular systems.">MonteCarlo</a> object, which is then initialized with the <a class="el" href="structSystem.html" title="Represents the central system for simulations.">System</a> objects and runs the simulation. This object loops over the cycles and performs the moves on the system.</p>
<p>During your run a few things will be created. First of all, an <code>output/</code> directory will be created with a <code>.txt</code> file which holds logging statements. Here, you can find all information about the run. Before the run all the settings are logged. Here you can find, for example, all force field settings, information about your system, units, components, frameworks, etc. During the run, with a frequency of <code>PrintEvery</code> cycles, statistics about the system are logged. This includes the pressure, energy, number of molecules, etc. At the end all these properties are then wrapped up in reports that give the block averages and report the energy drift of the system.</p>
<h1>Input file</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;SimulationType&quot; : &quot;MonteCarlo&quot;,</div>
<div class="line">  &quot;NumberOfCycles&quot; : 10000,</div>
<div class="line">  &quot;NumberOfInitializationCycles&quot; : 1000,</div>
<div class="line">  &quot;PrintEvery&quot; : 1000,</div>
<div class="line">  </div>
<div class="line">  &quot;Systems&quot; : </div>
<div class="line">  [</div>
<div class="line">    {</div>
<div class="line">      &quot;Type&quot; : &quot;Box&quot;,</div>
<div class="line">      &quot;BoxLengths&quot; : [30.0, 30.0, 30.0],</div>
<div class="line">      &quot;ExternalTemperature&quot; : 300.0,</div>
<div class="line">      &quot;ChargeMethod&quot; : &quot;None&quot;,</div>
<div class="line">      &quot;OutputPDBMovie&quot; : true,</div>
<div class="line">      &quot;SampleMovieEvery&quot; : 10</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line"> </div>
<div class="line">  &quot;Components&quot; : </div>
<div class="line">  [ </div>
<div class="line">    {</div>
<div class="line">      &quot;Name&quot; : &quot;methane&quot;,</div>
<div class="line">      &quot;MoleculeDefinition&quot; : &quot;ExampleDefinitions&quot;,</div>
<div class="line">      &quot;TranslationProbability&quot; : 0.5,</div>
<div class="line">      &quot;CreateNumberOfMolecules&quot; : 100</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Run with python</h1>
<p>Very similarly to what happens behind the scene during a run initiated from a <code>simulation.json</code> file, we can also carry out these steps ourselves, using python code.</p>
<p>We first create a <code>raspalib.ForceField</code> object, which without arguments, uses a default force field, which can be found in <code>data/forcefields/force_field.json</code>. Then, we have to create the MCMoveProbabilitiesParticles object ourselves, in this case we add just a <code>translationProbability</code> of 1.0. Then, we create the component, which in this case is the default methane component given by <code>raspa.Component</code>. We also create a <a class="el" href="structSimulationBox.html" title="Represents a simulation box used in simulations.">SimulationBox</a>. Then we add all these things to <code>raspa.System</code>. Afterwards, we pass the <a class="el" href="structSystem.html" title="Represents the central system for simulations.">System</a> to <a class="el" href="structMonteCarlo.html" title="Performs Monte Carlo simulations for molecular systems.">MonteCarlo</a> and call run, after which the simulation is started. This allows us to interact with the simulation objects after the run.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> raspalib</div>
<div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line">ff = raspalib.ForceField(<span class="stringliteral">&quot;force_field.json&quot;</span>)</div>
<div class="line">ff.useCharge = <span class="keyword">False</span></div>
<div class="line"> </div>
<div class="line">mcmoves = raspalib.MCMoveProbabilities(translationProbability=1.0)</div>
<div class="line"> </div>
<div class="line">methane = raspalib.Component(</div>
<div class="line">    componentId=0,</div>
<div class="line">    forceField=ff,</div>
<div class="line">    componentName=<span class="stringliteral">&quot;methane&quot;</span>,</div>
<div class="line">    fileName=<span class="stringliteral">&quot;methane.json&quot;</span>,</div>
<div class="line">    particleProbabilities=mcmoves,</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">box = raspalib.SimulationBox(30.0, 30.0, 30.0)</div>
<div class="line"> </div>
<div class="line">system = raspalib.System(</div>
<div class="line">    systemId=0,</div>
<div class="line">    externalTemperature=300.0,</div>
<div class="line">    forceField=ff,</div>
<div class="line">    components=[methane],</div>
<div class="line">    initialNumberOfMolecules=[100],</div>
<div class="line">    simulationBox=box,</div>
<div class="line">    sampleMoviesEvery=10,</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">mc = raspalib.MonteCarlo(</div>
<div class="line">    numberOfCycles=10000,</div>
<div class="line">    numberOfInitializationCycles=1000,</div>
<div class="line">    systems=[system],</div>
<div class="line">    outputToFiles=<span class="keyword">True</span>,</div>
<div class="line">)</div>
<div class="line">mc.run()</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docs_2tutorial.html">Tutorial</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
